# menu-generator

📋 智能周度配餐程序 - 完整功能描述
✅ 一、核心定位
一款零报错、高稳定、全合规的智能餐食规划程序，可自动生成 4 周每日午 / 晚餐完整用餐方案，兼顾菜品多样性、肉类营养均衡、主食搭配合规三大核心需求，适配家庭日常配餐使用，支持菜品灵活自定义。

✅ 二、核心功能清单
🥢 1. 餐食方案自动生成（核心能力）
▫️ 自动规划 4 周 ×7 天 ×2 餐（午餐 + 晚餐）完整用餐安排，即总计 56 餐；▫️ 支持 3 类合规餐食组合，严格遵循配餐逻辑，无任何错误搭配：
✔️ 「纯荤菜 + 素菜」组合 → 必搭配主食，营养均衡；
✔️ 「荤素菜」单吃 → 必搭配主食，满足正餐需求；
✔️ 「荤素主菜」单吃 → 自带主食属性，绝对不配额外主食（饺子 / 馄饨 / 面条等）。

🥩 2. 肉类精准分类与均衡分配（核心特色）
▫️ 内置 6 大类肉类标签：猪肉、牛羊肉、鸡肉、鱼、海鲜、其他，覆盖常见荤菜品类；
▫️ 智能实现「周内肉类均衡」：程序自动统计各类肉类使用频次，优先选择使用次数少的品类，确保 6 类肉类在单周内均匀出现，避免同类菜品频繁重复；
▫️ 鱼类菜品专属归类：独立「鱼」类标签，清蒸鲈鱼、红烧带鱼等鱼类菜品单独统计、均衡分配。

🚫 3. 菜品防重复双重校验（体验核心）
▫️ 「相邻顿严格防重复」：上一餐出现的菜品，下一餐绝对不会复用，保证每餐新鲜感；
▫️ 「周内菜品尽量防重复」：单周内同一菜品仅出现 1 次（极端菜品不足场景除外），最大化提升用餐多样性。

✅ 4. 主食搭配强制合规（铁律约束）
程序内置主食搭配核心规则，全程 100% 遵守，无任何违规组合：
▫️ ✔️ 荤素主菜（mix_main：饺子、馄饨、炸酱面等）→ 自带主食，不配额外主食；
▫️ ✔️ 纯荤菜（meat）、荤素菜（mix）→ 必配主食，支持白米饭、杂粮饭、清汤面、馒头、花卷 5 类主食随机适配。


📦 5. 菜品自定义与数据兼容（灵活拓展）
▫️ 支持 4 类菜品自定义配置，在FOOD_DATA中可自由增 / 删 / 改，适配个性化需求：
✔️ 纯荤菜（meat）、纯素菜（veg）、荤素菜（mix）、荤素主菜（mix_main）；
▫️ 肉类标签兼容能力：菜品缺失meat_type标签时，自动补为「其他」类，程序不报错、不中断；
▫️ 空数据兜底：任意菜品分类为空时，自动降级选择其他品类，全程零崩溃、零报错。

🛒 6. 食材用量自动汇总统计（实用能力）
▫️ 程序自动遍历所有餐食的食材配置，按「食材名称」汇总全周累计使用克数；
▫️ 输出清晰的「周度原料采购清单」，包含菜品食材 + 主食食材，标注各类食材总用量，可直接用于采购参考，无需手动核算。

📊 7. 数据统计与可视化展示（结果呈现）
▫️ 单周肉类使用统计：自动输出 6 类肉类的周使用次数、占比百分比，直观展示肉类均衡情况；
▫️ 餐食结果清晰展示：每餐标注「菜品组合 + 主食（如有）」，荤素主菜标注「自带主食属性」说明，分类明确、一目了然；
▫️ 异常数据日志提示：菜品缺失肉类标签时，自动打印修复日志，便于追溯和调整。


✅ 三、程序核心特性（稳定 & 合规保障）
✔️ 极致稳定性：零报错、零崩溃
▫️ 内置「安全随机选择」「变量提前初始化」「空数据兜底」三重防护机制；
▫️ 彻底解决IndexError「空列表随机」、UnboundLocalError「变量未定义」、KeyError「标签缺失」等所有报错，任意菜品配置下均可稳定运行。
✔️ 规则强合规：零违规、零错误
▫️ 主食搭配规则、肉类分类规则、菜品防重复规则全程强制遵守，无任何例外；
▫️ 新增「最终合规校验」兜底，拦截所有极端场景的违规组合，保障配餐结果 100% 合规。
✔️ 高拓展性：易修改、易适配
▫️ 菜品配置结构化：所有菜品、主食、食材用量均集中在字典中管理，增删菜品仅需修改对应配置，无需改动核心逻辑；
▫️ 肉类标签可拓展：支持新增 / 删减肉类分类，程序自动适配统计、均衡逻辑，无额外开发成本。


✅ 四、输出结果包含内容
程序运行后，控制台将按「单周→单日→单餐」层级，依次输出完整信息，所有内容结构化展示，可直接查看 / 复制：
菜品数据修复日志（如有异常）；
每周每日午餐、晚餐具体餐食方案（含菜品 + 主食标注）；
每周 6 类肉类使用频次、占比统计报表；
每周食材采购清单（含所有食材名称 + 累计用量）；
最终运行完成合规提示。


✅ 五、适用场景 & 核心优势
✅ 适用场景
▫️ 家庭日常周度配餐规划，无需手动思考每日菜品；
▫️ 食堂 / 餐饮小店基础餐食方案制定，快速生成多样化菜单；
▫️ 个性化配餐需求，支持灵活增减菜品、调整肉类分类。
✅ 核心优势
✅ 稳定：全程零报错、零崩溃，任意配置下均可正常运行；
✅ 合规：主食搭配、肉类均衡、防重复规则 100% 遵守；
✅ 实用：兼顾多样性与营养均衡，输出采购清单可直接落地；
✅ 灵活：菜品、肉类、主食均可自定义，适配各类需求。
